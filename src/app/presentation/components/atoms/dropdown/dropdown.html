<div class="relative min-w-full md:min-w-0 md:w-48" (keydown.escape)="closeDropdown()" tabindex="0">
  <!-- BotÃ³n principal -->
  <button
    type="button"
    (click)="toggleDropdown()"
    class="w-full flex justify-between items-center px-3 py-2 border rounded-lg text-sm 
           bg-transparent border-gray-300 dark:border-gray-700
           text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800
           transition"
    aria-haspopup="listbox"
    [attr.aria-expanded]="isOpen()"
  >
    <span>{{ selected?.label || placeholder }}</span>
    <svg
      class="w-4 h-4 ml-2 transition-transform"
      [class.rotate-180]="isOpen()"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      viewBox="0 0 24 24"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Lista desplegable -->
  <ul
    *ngIf="isOpen()"
    class="absolute z-10 mt-1 w-full bg-white dark:bg-[#181818] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg animate-fadeIn"
    role="listbox"
  >
    <li
      *ngFor="let option of options; let i = index"
      (click)="selectOption(option)"
      class="px-3 py-2 cursor-pointer text-sm text-gray-800 dark:text-gray-200 
             hover:bg-gray-100 dark:hover:bg-black transition"
      role="option"
      [attr.aria-selected]="selected?.value === option.value"
      tabindex="0"
      (keydown.enter)="selectOption(option)"
    >
      {{ option.label }}
    </li>
  </ul>
</div>
